[
    {
        "id": "8b6e3b319b97a18a",
        "type": "tab",
        "label": "Entrance",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "95eb18db5e77ef4c",
        "type": "tab",
        "label": "Kitchen",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "751c2276bdb4df53",
        "type": "tab",
        "label": "Living Room",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "03c58ed96b7b8395",
        "type": "tab",
        "label": "Office",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "fa6bb9cfa58677c8",
        "type": "tab",
        "label": "Bedroom",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c41ab6f93f6c103e",
        "type": "tab",
        "label": "Bathroom",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "0ef8a234d4e5690c",
        "type": "tab",
        "label": "System",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "64b48be79869231a",
        "type": "subflow",
        "name": "Hue Remote",
        "info": "",
        "category": "",
        "in": [],
        "out": [
            {
                "x": 850,
                "y": 140,
                "wires": [
                    {
                        "id": "32f72f6651fbaf20",
                        "port": 0
                    }
                ]
            },
            {
                "x": 840,
                "y": 200,
                "wires": [
                    {
                        "id": "9362f6f49aefaa0c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 260,
                "wires": [
                    {
                        "id": "fe022aa6286515ce",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 320,
                "wires": [
                    {
                        "id": "8a400f0e1110a72a",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 380,
                "wires": [
                    {
                        "id": "a55d6f591fa9f4be",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 440,
                "wires": [
                    {
                        "id": "a3aea1e27cc11f9b",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 500,
                "wires": [
                    {
                        "id": "59a9989f23feb6ae",
                        "port": 0
                    }
                ]
            },
            {
                "x": 850,
                "y": 560,
                "wires": [
                    {
                        "id": "89579a6a4e4f99b9",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "MQTT_TOPIC",
                "type": "str",
                "value": "",
                "ui": {
                    "icon": "font-awesome/fa-tv",
                    "label": {
                        "en-US": "Remote Controller Entity"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "env"
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#A6BBCF",
        "outputLabels": [
            "top_single",
            "top_long",
            "increase_single",
            "increase_long",
            "single_decrease",
            "decrease_long",
            "bottom_single",
            "bottom_long"
        ],
        "icon": "node-red-contrib-home-assistant-websocket/ha-entity-switch.svg",
        "status": {
            "x": 780,
            "y": 660,
            "wires": [
                {
                    "id": "32f72f6651fbaf20",
                    "port": 0
                },
                {
                    "id": "9362f6f49aefaa0c",
                    "port": 0
                },
                {
                    "id": "fe022aa6286515ce",
                    "port": 0
                },
                {
                    "id": "8a400f0e1110a72a",
                    "port": 0
                },
                {
                    "id": "a55d6f591fa9f4be",
                    "port": 0
                },
                {
                    "id": "a3aea1e27cc11f9b",
                    "port": 0
                },
                {
                    "id": "59a9989f23feb6ae",
                    "port": 0
                },
                {
                    "id": "89579a6a4e4f99b9",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "44754de2761b91b1",
        "type": "subflow",
        "name": "AC - Switch",
        "info": "",
        "category": "",
        "in": [],
        "out": [],
        "env": [
            {
                "name": "AC",
                "type": "str",
                "value": ""
            },
            {
                "name": "SWITCH",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-thermometer-0",
        "status": {
            "x": 1020,
            "y": 260,
            "wires": [
                {
                    "id": "89b5ba5883233dfb",
                    "port": 0
                },
                {
                    "id": "b3db80cfee277d88",
                    "port": 0
                },
                {
                    "id": "232b830dedea4911",
                    "port": 0
                },
                {
                    "id": "8eb6887b9e25f2f8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "a9c82ea585250d5c",
        "type": "subflow",
        "name": "Light - Switch",
        "info": "",
        "category": "",
        "in": [],
        "out": [],
        "env": [
            {
                "name": "LIGHT",
                "type": "str",
                "value": ""
            },
            {
                "name": "SWITCH",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {},
        "color": "#E2D96E",
        "icon": "font-awesome/fa-sun-o",
        "status": {
            "x": 1120,
            "y": 220,
            "wires": [
                {
                    "id": "9233ff21d5f5d632",
                    "port": 0
                },
                {
                    "id": "0ff1089ed4f8402e",
                    "port": 0
                },
                {
                    "id": "2a960bc62fe9d1ad",
                    "port": 0
                },
                {
                    "id": "81d9fba568e06482",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "30b7e19d.180c4e",
        "type": "subflow",
        "name": "No-Op",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 40,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 220,
                "y": 40,
                "wires": [
                    {
                        "id": "30b7e19d.180c4e",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#C0C0C0",
        "icon": "font-awesome/fa-circle-o-notch"
    },
    {
        "id": "0eac027afb048323",
        "type": "subflow",
        "name": "Wasp Box",
        "info": "",
        "category": "",
        "in": [],
        "out": [],
        "env": [
            {
                "name": "MOTION_SENSOR",
                "type": "str",
                "value": "",
                "ui": {
                    "label": {
                        "en-US": "Motion Sensor"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "BRIGHTNESS_SENSOR",
                "type": "str",
                "value": "",
                "ui": {
                    "label": {
                        "en-US": "Brightness Sensor"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "LIGHT_ENTITY",
                "type": "str",
                "value": "",
                "ui": {
                    "label": {
                        "en-US": "Light Entity"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "DISABLED_WHEN_SLEEPING",
                "type": "bool",
                "value": "false",
                "ui": {
                    "label": {
                        "en-US": "Disabled when sleeping?"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "bool",
                            "env"
                        ]
                    }
                }
            },
            {
                "name": "COOLDOWN_TIME_SECONDS",
                "type": "num",
                "value": "60",
                "ui": {
                    "label": {
                        "en-US": "Cooldown Time (seconds)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "num",
                            "env"
                        ]
                    }
                }
            },
            {
                "name": "DOOR_SENSOR",
                "type": "str",
                "value": "",
                "ui": {
                    "label": {
                        "en-US": "Door Sensor"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "env"
                        ]
                    }
                }
            },
            {
                "name": "LIGHT_THRESHOLD",
                "type": "num",
                "value": "30",
                "ui": {
                    "label": {
                        "en-US": "Light Threshold"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "num",
                            "env"
                        ]
                    }
                }
            },
            {
                "name": "MANUAL_TIMER",
                "type": "str",
                "value": "",
                "ui": {
                    "label": {
                        "en-US": "Manual Timer"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "env"
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#E2D96E",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 580,
            "y": 760,
            "wires": [
                {
                    "id": "baf3182e961902cd",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9ae4ced5f6035fca",
        "type": "subflow",
        "name": "Aqara Z1 Pro",
        "info": "",
        "category": "",
        "in": [],
        "out": [
            {
                "x": 560,
                "y": 100,
                "wires": [
                    {
                        "id": "b02ef682c766788f",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Z1_TOPIC",
                "type": "str",
                "value": "",
                "ui": {
                    "icon": "font-awesome/fa-toggle-on",
                    "label": {
                        "en-US": "Topic"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "env"
                        ]
                    }
                }
            },
            {
                "name": "Z1_ACTION",
                "type": "str",
                "value": "",
                "ui": {
                    "icon": "font-awesome/fa-play",
                    "label": {
                        "en-US": "Button"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Top"
                                },
                                "v": "single_top"
                            },
                            {
                                "l": {
                                    "en-US": "Center"
                                },
                                "v": "single_center"
                            },
                            {
                                "l": {
                                    "en-US": "Bottom"
                                },
                                "v": "single_bottom"
                            },
                            {
                                "l": {
                                    "en-US": "Wireless"
                                },
                                "v": "single_wireless"
                            },
                            {
                                "l": {
                                    "en-US": "Slider Up"
                                },
                                "v": "slider_up"
                            },
                            {
                                "l": {
                                    "en-US": "Slider Down"
                                },
                                "v": "slider_down"
                            },
                            {
                                "l": {
                                    "en-US": "Double Top"
                                },
                                "v": "double_top"
                            },
                            {
                                "l": {
                                    "en-US": "Double Center"
                                },
                                "v": "double_center"
                            },
                            {
                                "l": {
                                    "en-US": "Double Bottom"
                                },
                                "v": "double_bottom"
                            },
                            {
                                "l": {
                                    "en-US": "Double Wireless"
                                },
                                "v": "double_wireless"
                            }
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#B8A0D8",
        "icon": "node-red-contrib-home-assistant-websocket/ha-entity-switch.svg",
        "status": {
            "x": 1120,
            "y": 180,
            "wires": [
                {
                    "id": "1e057a01ef74cead",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "2e02acbf157d8262",
        "type": "subflow",
        "name": "Aqara E1",
        "info": "",
        "category": "",
        "in": [],
        "out": [
            {
                "x": 560,
                "y": 100,
                "wires": [
                    {
                        "id": "4184f1058e57b072",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "E1_TOPIC",
                "type": "str",
                "value": "",
                "ui": {
                    "icon": "font-awesome/fa-toggle-on",
                    "label": {
                        "en-US": "Topic"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "env"
                        ]
                    }
                }
            },
            {
                "name": "E1_ACTION",
                "type": "str",
                "value": "",
                "ui": {
                    "icon": "font-awesome/fa-play",
                    "label": {
                        "en-US": "Button"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Left"
                                },
                                "v": "single_left"
                            },
                            {
                                "l": {
                                    "en-US": "Right"
                                },
                                "v": "single_right"
                            },
                            {
                                "l": {
                                    "en-US": "Double Left"
                                },
                                "v": "double_left"
                            },
                            {
                                "l": {
                                    "en-US": "Double Right"
                                },
                                "v": "double_right"
                            }
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#E9967A",
        "icon": "node-red-contrib-home-assistant-websocket/ha-entity-switch.svg",
        "status": {
            "x": 1120,
            "y": 180,
            "wires": [
                {
                    "id": "bb3a81fcbf5ffc3d",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "f88bb71a82464dcf",
        "type": "server",
        "name": "ha",
        "version": 5,
        "addon": false,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true,
        "cacheJson": true,
        "heartbeat": true,
        "heartbeatInterval": "30",
        "areaSelector": "friendlyName",
        "deviceSelector": "friendlyName",
        "entitySelector": "friendlyName",
        "statusSeparator": ": ",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "h23",
        "statusTimeFormat": "h:m",
        "enableGlobalContextStore": true
    },
    {
        "id": "1031d59e41cceee8",
        "type": "mqtt-broker",
        "name": "mosquitto",
        "broker": "mosquitto.mosquitto.svc.cluster.local",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "b68f145e9b5f00ba",
        "type": "light-scheduler-settings",
        "name": "Singapore",
        "latitude": "1.317897725633881",
        "longitude": "103.90395478583513"
    },
    {
        "id": "e4cf0b65bd6882d1",
        "type": "mqtt in",
        "z": "64b48be79869231a",
        "name": "",
        "topic": "${MQTT_TOPIC}",
        "qos": "2",
        "datatype": "json",
        "broker": "1031d59e41cceee8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 340,
        "wires": [
            [
                "157727b0a8108b71"
            ]
        ]
    },
    {
        "id": "157727b0a8108b71",
        "type": "switch",
        "z": "64b48be79869231a",
        "name": "Button",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on_press_release",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "on_hold_release",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "up_press_release",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "up_hold_release",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "down_press_release",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "down_hold_release",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off_press_release",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off_hold_release",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 350,
        "y": 340,
        "wires": [
            [
                "32f72f6651fbaf20"
            ],
            [
                "9362f6f49aefaa0c"
            ],
            [
                "fe022aa6286515ce"
            ],
            [
                "8a400f0e1110a72a"
            ],
            [
                "a55d6f591fa9f4be"
            ],
            [
                "a3aea1e27cc11f9b"
            ],
            [
                "59a9989f23feb6ae"
            ],
            [
                "89579a6a4e4f99b9"
            ]
        ]
    },
    {
        "id": "32f72f6651fbaf20",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 1 Short Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9362f6f49aefaa0c",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 1 Long Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "fe022aa6286515ce",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 2 Short Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "8a400f0e1110a72a",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 2 Long Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "a55d6f591fa9f4be",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 3 Short Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "a3aea1e27cc11f9b",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 3 Long Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "59a9989f23feb6ae",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 4 Short Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "89579a6a4e4f99b9",
        "type": "change",
        "z": "64b48be79869231a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch 4 Long Press\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "a6498f59d0b5faf6",
        "type": "server-state-changed",
        "z": "44754de2761b91b1",
        "name": "AC is running",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "${AC}"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 160,
        "wires": [
            [
                "0cb15bd1ddeac6b8"
            ],
            [
                "4619ab0bd97691d3"
            ]
        ]
    },
    {
        "id": "1b86d5f6c0a25e69",
        "type": "api-call-service",
        "z": "44754de2761b91b1",
        "name": "Turn On Switch",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${SWITCH}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_on",
        "x": 560,
        "y": 120,
        "wires": [
            [
                "89b5ba5883233dfb"
            ]
        ]
    },
    {
        "id": "d672b65d84bfa882",
        "type": "api-call-service",
        "z": "44754de2761b91b1",
        "name": "Turn Off Switch",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${SWITCH}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_off",
        "x": 560,
        "y": 180,
        "wires": [
            [
                "b3db80cfee277d88"
            ]
        ]
    },
    {
        "id": "7ecceb23f5046aff",
        "type": "server-state-changed",
        "z": "44754de2761b91b1",
        "name": "Switch On",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "${SWITCH}"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 360,
        "wires": [
            [
                "8317cda84e9c80c8"
            ],
            [
                "fc4486a2f8098ba7"
            ]
        ]
    },
    {
        "id": "e1689db97fd40b57",
        "type": "api-call-service",
        "z": "44754de2761b91b1",
        "name": "Turn Off AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${AC}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 550,
        "y": 400,
        "wires": [
            [
                "8eb6887b9e25f2f8"
            ]
        ]
    },
    {
        "id": "9584e0dfa376c0b7",
        "type": "api-call-service",
        "z": "44754de2761b91b1",
        "name": "Turn On AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${AC}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_on",
        "x": 550,
        "y": 320,
        "wires": [
            [
                "232b830dedea4911"
            ]
        ]
    },
    {
        "id": "89b5ba5883233dfb",
        "type": "change",
        "z": "44754de2761b91b1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch turned on\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "b3db80cfee277d88",
        "type": "change",
        "z": "44754de2761b91b1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch turned off\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "232b830dedea4911",
        "type": "change",
        "z": "44754de2761b91b1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"AC turned on\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "8eb6887b9e25f2f8",
        "type": "change",
        "z": "44754de2761b91b1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"AC turned off\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "0cb15bd1ddeac6b8",
        "type": "api-current-state",
        "z": "44754de2761b91b1",
        "name": "Switch On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "${SWITCH}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 120,
        "wires": [
            [],
            [
                "1b86d5f6c0a25e69"
            ]
        ]
    },
    {
        "id": "8317cda84e9c80c8",
        "type": "api-current-state",
        "z": "44754de2761b91b1",
        "name": "AC running?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "${AC}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 320,
        "wires": [
            [],
            [
                "9584e0dfa376c0b7"
            ]
        ]
    },
    {
        "id": "fc4486a2f8098ba7",
        "type": "api-current-state",
        "z": "44754de2761b91b1",
        "name": "AC running?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "${AC}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 400,
        "wires": [
            [
                "e1689db97fd40b57"
            ],
            []
        ]
    },
    {
        "id": "4619ab0bd97691d3",
        "type": "api-current-state",
        "z": "44754de2761b91b1",
        "name": "Switch On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "${SWITCH}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 180,
        "wires": [
            [
                "d672b65d84bfa882"
            ],
            []
        ]
    },
    {
        "id": "96fa14d6e86c5b2f",
        "type": "server-state-changed",
        "z": "a9c82ea585250d5c",
        "name": "Light is On",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "${LIGHT}"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 120,
        "wires": [
            [
                "d68a22d1be135017"
            ],
            [
                "544179925ee47f2d"
            ]
        ]
    },
    {
        "id": "0754ec1fe5cc26f1",
        "type": "api-call-service",
        "z": "a9c82ea585250d5c",
        "name": "Turn On Switch",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${SWITCH}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_on",
        "x": 560,
        "y": 80,
        "wires": [
            [
                "9233ff21d5f5d632"
            ]
        ]
    },
    {
        "id": "a8b91c9b45b598e8",
        "type": "api-call-service",
        "z": "a9c82ea585250d5c",
        "name": "Turn Off Switch",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${SWITCH}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_off",
        "x": 560,
        "y": 140,
        "wires": [
            [
                "0ff1089ed4f8402e"
            ]
        ]
    },
    {
        "id": "cb3f83376ca2367a",
        "type": "server-state-changed",
        "z": "a9c82ea585250d5c",
        "name": "Switch On",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "${SWITCH}"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 320,
        "wires": [
            [
                "26c6bd5dd0f3f26a"
            ],
            [
                "289013499de8159f"
            ]
        ]
    },
    {
        "id": "eac178a53ce4e827",
        "type": "api-call-service",
        "z": "a9c82ea585250d5c",
        "name": "Turn Off Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${LIGHT}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 560,
        "y": 360,
        "wires": [
            [
                "81d9fba568e06482"
            ]
        ]
    },
    {
        "id": "eb4f03aa2b0751c6",
        "type": "api-call-service",
        "z": "a9c82ea585250d5c",
        "name": "Turn On Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${LIGHT}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 560,
        "y": 280,
        "wires": [
            [
                "2a960bc62fe9d1ad"
            ]
        ]
    },
    {
        "id": "9233ff21d5f5d632",
        "type": "change",
        "z": "a9c82ea585250d5c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch turned on\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "0ff1089ed4f8402e",
        "type": "change",
        "z": "a9c82ea585250d5c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Switch turned off\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "2a960bc62fe9d1ad",
        "type": "change",
        "z": "a9c82ea585250d5c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Light turned on\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "81d9fba568e06482",
        "type": "change",
        "z": "a9c82ea585250d5c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Light turned off\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "d68a22d1be135017",
        "type": "api-current-state",
        "z": "a9c82ea585250d5c",
        "name": "Switch Off?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "${SWITCH}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 80,
        "wires": [
            [
                "0754ec1fe5cc26f1"
            ],
            []
        ]
    },
    {
        "id": "26c6bd5dd0f3f26a",
        "type": "api-current-state",
        "z": "a9c82ea585250d5c",
        "name": "Light is Off?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "${LIGHT}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 280,
        "wires": [
            [
                "eb4f03aa2b0751c6"
            ],
            []
        ]
    },
    {
        "id": "289013499de8159f",
        "type": "api-current-state",
        "z": "a9c82ea585250d5c",
        "name": "Light is On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "${LIGHT}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 360,
        "wires": [
            [
                "eac178a53ce4e827"
            ],
            []
        ]
    },
    {
        "id": "544179925ee47f2d",
        "type": "api-current-state",
        "z": "a9c82ea585250d5c",
        "name": "Switch On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "${SWITCH}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 140,
        "wires": [
            [
                "a8b91c9b45b598e8"
            ],
            []
        ]
    },
    {
        "id": "a8e882e72e2f2cf2",
        "type": "comment",
        "z": "0eac027afb048323",
        "name": "Wasp Box",
        "info": "",
        "x": 100,
        "y": 60,
        "wires": []
    },
    {
        "id": "54498033e80412b8",
        "type": "server-state-changed",
        "z": "0eac027afb048323",
        "name": "No Motion for Xm?",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "${MOTION_SENSOR}"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "${COOLDOWN_TIME_SECONDS}",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 340,
        "wires": [
            [
                "2f2ba9961146323a"
            ],
            [
                "a3042af31ef915c5"
            ]
        ]
    },
    {
        "id": "2f2ba9961146323a",
        "type": "function",
        "z": "0eac027afb048323",
        "name": "Door Open?",
        "func": "const doorSensorName = env.get('DOOR_SENSOR');\n\nif (!doorSensorName) {\n    return [msg, null];\n}\n\nconst ha = global.get('homeassistant.ha');\nconst doorState = ha.states[doorSensorName];\n\nif (!doorState || !('state' in doorState)) {\n    node.error(`No door state found in ${doorSensorName}`);\n    return;\n}\n\nif (doorState.state == 'on') {\n    return [msg, null];\n}\n\nreturn [null, msg];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 200,
        "wires": [
            [
                "a0ac83b409a3ed91"
            ],
            [
                "514e3a30e1722a03"
            ]
        ]
    },
    {
        "id": "6af40da077d20e8b",
        "type": "api-call-service",
        "z": "0eac027afb048323",
        "name": "Lights Off",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${LIGHT_ENTITY}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_off",
        "x": 860,
        "y": 120,
        "wires": [
            [
                "60de136ab08038c8"
            ]
        ]
    },
    {
        "id": "60de136ab08038c8",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Light Turned Off\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1030,
        "y": 120,
        "wires": [
            [
                "837b3236396d8e69"
            ]
        ]
    },
    {
        "id": "f244c974aab6e3a3",
        "type": "api-current-state",
        "z": "0eac027afb048323",
        "name": "Dark?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "${LIGHT_THRESHOLD}",
        "halt_if_type": "num",
        "halt_if_compare": "lt",
        "entity_id": "${BRIGHTNESS_SENSOR}",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1070,
        "y": 380,
        "wires": [
            [
                "8ea7273bf9abebf0"
            ],
            []
        ]
    },
    {
        "id": "18c9c003199d17ad",
        "type": "api-current-state",
        "z": "0eac027afb048323",
        "name": "Sunset?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "below_horizon",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sun.sun",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1080,
        "y": 440,
        "wires": [
            [
                "8ea7273bf9abebf0"
            ],
            []
        ]
    },
    {
        "id": "a3042af31ef915c5",
        "type": "function",
        "z": "0eac027afb048323",
        "name": "Door Open?",
        "func": "const doorSensorName = env.get('DOOR_SENSOR');\n\nif (!doorSensorName) {\n    return [msg, null];\n}\n\nconst ha = global.get('homeassistant.ha');\nconst doorState = ha.states[doorSensorName];\n\nif (!doorState || !('state' in doorState)) {\n    node.error(`No door state found in ${doorSensorName}`);\n    return;\n}\n\nif (doorState.state == 'on') {\n    return [msg, null];\n}\n\nreturn [null, msg];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 480,
        "wires": [
            [
                "2239e4f1c7c35e50"
            ],
            [
                "05dceca431a4d2cf"
            ]
        ]
    },
    {
        "id": "3692f61d4b646731",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"text\":\"Light Turned On\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 400,
        "wires": [
            [
                "aed9390d780a0258"
            ]
        ]
    },
    {
        "id": "8ea7273bf9abebf0",
        "type": "api-call-service",
        "z": "0eac027afb048323",
        "name": "Lights On",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "${LIGHT_ENTITY}"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_on",
        "x": 1260,
        "y": 400,
        "wires": [
            [
                "3692f61d4b646731"
            ]
        ]
    },
    {
        "id": "0b8676008a2f775b",
        "type": "function",
        "z": "0eac027afb048323",
        "name": "Sleeping?",
        "func": "const disabledWhenSleeping = env.get('DISABLED_WHEN_SLEEPING');\n\nif (!disabledWhenSleeping) {\n    return [null, msg];\n}\n\nconst ha = global.get('homeassistant.ha');\nconst sleeping = ha.states['timer.bedroom_sleeping'];\n\nif (!sleeping || !('state' in sleeping)) {\n    node.error('No sleeping timer found');\n    return;\n}\n\nif (sleeping.state == 'idle') {\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 360,
        "wires": [
            [
                "836f3a475521dcdd"
            ],
            [
                "f244c974aab6e3a3",
                "18c9c003199d17ad"
            ]
        ]
    },
    {
        "id": "542f63427dacf8a5",
        "type": "comment",
        "z": "0eac027afb048323",
        "name": "Update Node Status",
        "info": "",
        "x": 130,
        "y": 680,
        "wires": []
    },
    {
        "id": "0931d2c5bb51a9c1",
        "type": "link in",
        "z": "0eac027afb048323",
        "name": "link in 1",
        "links": [
            "837b3236396d8e69",
            "aed9390d780a0258",
            "ec7ac1638ea317f0",
            "2de4238d17df875d",
            "a3f28d08e064c26b",
            "5f61547e65515866",
            "ded53877258c896a"
        ],
        "x": 95,
        "y": 760,
        "wires": [
            [
                "87eb5ffa0193ecbc"
            ]
        ]
    },
    {
        "id": "837b3236396d8e69",
        "type": "link out",
        "z": "0eac027afb048323",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "0931d2c5bb51a9c1"
        ],
        "x": 1135,
        "y": 120,
        "wires": []
    },
    {
        "id": "aed9390d780a0258",
        "type": "link out",
        "z": "0eac027afb048323",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "0931d2c5bb51a9c1"
        ],
        "x": 1515,
        "y": 400,
        "wires": []
    },
    {
        "id": "5aad74f37633f12d",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"yellow\",\"text\":\"Light Automations Disabled\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 180,
        "wires": [
            [
                "ec7ac1638ea317f0"
            ]
        ]
    },
    {
        "id": "ec7ac1638ea317f0",
        "type": "link out",
        "z": "0eac027afb048323",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "0931d2c5bb51a9c1"
        ],
        "x": 955,
        "y": 180,
        "wires": []
    },
    {
        "id": "9ca54a3a7af2f108",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"yellow\",\"text\":\"Light Automations Disabled\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 540,
        "wires": [
            [
                "2de4238d17df875d"
            ]
        ]
    },
    {
        "id": "2de4238d17df875d",
        "type": "link out",
        "z": "0eac027afb048323",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "0931d2c5bb51a9c1"
        ],
        "x": 995,
        "y": 540,
        "wires": []
    },
    {
        "id": "836f3a475521dcdd",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"yellow\",\"text\":\"Sleeping Mode Enabled\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 320,
        "wires": [
            [
                "a3f28d08e064c26b"
            ]
        ]
    },
    {
        "id": "a3f28d08e064c26b",
        "type": "link out",
        "z": "0eac027afb048323",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "0931d2c5bb51a9c1"
        ],
        "x": 1175,
        "y": 320,
        "wires": []
    },
    {
        "id": "514e3a30e1722a03",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"yellow\",\"text\":\"Door Closed\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 220,
        "wires": [
            [
                "5f61547e65515866"
            ]
        ]
    },
    {
        "id": "5f61547e65515866",
        "type": "link out",
        "z": "0eac027afb048323",
        "name": "link out 6",
        "mode": "link",
        "links": [
            "0931d2c5bb51a9c1"
        ],
        "x": 675,
        "y": 220,
        "wires": []
    },
    {
        "id": "05dceca431a4d2cf",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"yellow\",\"text\":\"Door Closed\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 520,
        "wires": [
            [
                "ded53877258c896a"
            ]
        ]
    },
    {
        "id": "ded53877258c896a",
        "type": "link out",
        "z": "0eac027afb048323",
        "name": "link out 7",
        "mode": "link",
        "links": [
            "0931d2c5bb51a9c1"
        ],
        "x": 675,
        "y": 520,
        "wires": []
    },
    {
        "id": "a0ac83b409a3ed91",
        "type": "function",
        "z": "0eac027afb048323",
        "name": "Light Automations Enabled?",
        "func": "const ha = global.get('homeassistant.ha');\n\nconst globalEnabled = ha.states['input_boolean.home_light_automations'];\n\nif (!globalEnabled) {\n    return [null, msg];\n}\n\nconst timerName = env.get('MANUAL_TIMER');\n\nif (!timerName) {\n    return [msg, null];\n}\n\nconst timerState = ha.states[timerName];\n\nif (!timerName || !('state' in timerState)) {\n    node.error(`No timer state found in ${timerName}`);\n    return;\n}\n\nif (timerState.state == 'idle') {\n    return [msg, null];\n}\n\nreturn [null, msg];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 160,
        "wires": [
            [
                "6af40da077d20e8b"
            ],
            [
                "5aad74f37633f12d"
            ]
        ]
    },
    {
        "id": "2239e4f1c7c35e50",
        "type": "function",
        "z": "0eac027afb048323",
        "name": "Light Automations Enabled?",
        "func": "const ha = global.get('homeassistant.ha');\n\nconst globalEnabled = ha.states['input_boolean.home_light_automations'];\n\nif (!globalEnabled) {\n    return [null, msg];\n}\n\nconst timerName = env.get('MANUAL_TIMER');\n\nif (!timerName) {\n    return [msg, null];\n}\n\nconst timerState = ha.states[timerName];\n\nif (!timerName || !('state' in timerState)) {\n    node.error(`No timer state found in ${timerName}`);\n    return;\n}\n\nif (timerState.state == 'idle') {\n    return [msg, null];\n}\n\nreturn [null, msg];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 460,
        "wires": [
            [
                "0b8676008a2f775b"
            ],
            [
                "9ca54a3a7af2f108"
            ]
        ]
    },
    {
        "id": "baf3182e961902cd",
        "type": "change",
        "z": "0eac027afb048323",
        "name": "Format",
        "rules": [
            {
                "t": "set",
                "p": "payload.text",
                "pt": "msg",
                "to": "$join([payload.text, \" : \", payload.time])",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "87eb5ffa0193ecbc",
        "type": "moment",
        "z": "0eac027afb048323",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "${TZ}",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "Do MMM, H:mm",
        "locale": "C",
        "output": "payload.time",
        "outputType": "msg",
        "outTz": "${TZ}",
        "x": 260,
        "y": 760,
        "wires": [
            [
                "baf3182e961902cd"
            ]
        ]
    },
    {
        "id": "ac20bd2f283e6d5b",
        "type": "inject",
        "z": "9ae4ced5f6035fca",
        "name": "",
        "props": [
            {
                "p": "topic",
                "v": "zigbee2mqtt/${Z1_TOPIC}",
                "vt": "env"
            },
            {
                "p": "action",
                "v": "subscribe",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 140,
        "wires": [
            [
                "4d02f6b4cb6ec180"
            ]
        ]
    },
    {
        "id": "4d02f6b4cb6ec180",
        "type": "mqtt in",
        "z": "9ae4ced5f6035fca",
        "name": "${Z1_TOPIC}",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "1031d59e41cceee8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 270,
        "y": 140,
        "wires": [
            [
                "b02ef682c766788f"
            ]
        ]
    },
    {
        "id": "b02ef682c766788f",
        "type": "switch",
        "z": "9ae4ced5f6035fca",
        "name": "",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Z1_ACTION",
                "vt": "env"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 140,
        "wires": [
            [
                "b8dd38d94512855a"
            ]
        ]
    },
    {
        "id": "1e057a01ef74cead",
        "type": "change",
        "z": "9ae4ced5f6035fca",
        "name": "Format",
        "rules": [
            {
                "t": "set",
                "p": "payload.text",
                "pt": "msg",
                "to": "$join([payload.text, \": \", payload.time])",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "b8dd38d94512855a",
        "type": "change",
        "z": "9ae4ced5f6035fca",
        "name": "Payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{    \"text\": payload.action,    \"fill\": \"green\",    \"shape\": \"dot\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 180,
        "wires": [
            [
                "320449ce1782e7f3"
            ]
        ]
    },
    {
        "id": "320449ce1782e7f3",
        "type": "moment",
        "z": "9ae4ced5f6035fca",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "${TZ}",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "Do MMM, H:mm",
        "locale": "C",
        "output": "payload.time",
        "outputType": "msg",
        "outTz": "${TZ}",
        "x": 800,
        "y": 180,
        "wires": [
            [
                "1e057a01ef74cead"
            ]
        ]
    },
    {
        "id": "4d535444168fcfda",
        "type": "inject",
        "z": "2e02acbf157d8262",
        "name": "",
        "props": [
            {
                "p": "topic",
                "v": "zigbee2mqtt/${E1_TOPIC}",
                "vt": "env"
            },
            {
                "p": "action",
                "v": "subscribe",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 140,
        "wires": [
            [
                "dad43c2235aabbdc"
            ]
        ]
    },
    {
        "id": "dad43c2235aabbdc",
        "type": "mqtt in",
        "z": "2e02acbf157d8262",
        "name": "${E1_TOPIC}",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "1031d59e41cceee8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 270,
        "y": 140,
        "wires": [
            [
                "4184f1058e57b072"
            ]
        ]
    },
    {
        "id": "4184f1058e57b072",
        "type": "switch",
        "z": "2e02acbf157d8262",
        "name": "",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "E1_ACTION",
                "vt": "env"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 140,
        "wires": [
            [
                "0e7f9aaa8c5a78d1"
            ]
        ]
    },
    {
        "id": "bb3a81fcbf5ffc3d",
        "type": "change",
        "z": "2e02acbf157d8262",
        "name": "Format",
        "rules": [
            {
                "t": "set",
                "p": "payload.text",
                "pt": "msg",
                "to": "$join([payload.text, \": \", payload.time])",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "0e7f9aaa8c5a78d1",
        "type": "change",
        "z": "2e02acbf157d8262",
        "name": "Payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{    \"text\": payload.action,    \"fill\": \"green\",    \"shape\": \"dot\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 180,
        "wires": [
            [
                "3ab96b19c9a2b1b6"
            ]
        ]
    },
    {
        "id": "3ab96b19c9a2b1b6",
        "type": "moment",
        "z": "2e02acbf157d8262",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "${TZ}",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "Do MMM, H:mm",
        "locale": "C",
        "output": "payload.time",
        "outputType": "msg",
        "outTz": "${TZ}",
        "x": 800,
        "y": 180,
        "wires": [
            [
                "bb3a81fcbf5ffc3d"
            ]
        ]
    },
    {
        "id": "ee75fafb4ffd9a2c",
        "type": "comment",
        "z": "8b6e3b319b97a18a",
        "name": "Leaving Home",
        "info": "",
        "x": 110,
        "y": 60,
        "wires": []
    },
    {
        "id": "1f6705cf3cbafbb7",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Turn Off Speakers",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "media_player.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.home_speakers",
            "media_player.living_room_tv"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "media_player",
        "service": "turn_off",
        "x": 650,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "75ad8e92f5bc17a9",
        "type": "api-current-state",
        "z": "8b6e3b319b97a18a",
        "name": "Home Vacuumed?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_vacuumed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 650,
        "y": 380,
        "wires": [
            [],
            [
                "401f88c5f497a03d"
            ]
        ]
    },
    {
        "id": "401f88c5f497a03d",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Vacuum Home",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "vacuum.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "vacuum.vacuum_cleaner"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "vacuum",
        "service": "start",
        "x": 860,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "0e5d9f1de0e99dc5",
        "type": "comment",
        "z": "8b6e3b319b97a18a",
        "name": "Arriving Home",
        "info": "",
        "x": 110,
        "y": 540,
        "wires": []
    },
    {
        "id": "a7e21d1bcd19c4bb",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Turn Off ACs",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.home_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 630,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "efd3221ac35f1134",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Cancel Timers",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.cancel",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.home_automatic_lights_timers",
            "timer.bedroom_sleeping"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "cancel",
        "x": 640,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "b543223065b94c6e",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Turn Off Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.home_lights",
            "light.living_room_tv_lightstrip"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_off",
        "x": 640,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "270c532b8c19ac96",
        "type": "server-state-changed",
        "z": "8b6e3b319b97a18a",
        "name": "Door Opened",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.entrance_door_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 700,
        "wires": [
            [
                "84d49a26691371e9"
            ],
            []
        ]
    },
    {
        "id": "84d49a26691371e9",
        "type": "api-current-state",
        "z": "8b6e3b319b97a18a",
        "name": "Home Locked for 5m?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_locked",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 360,
        "y": 700,
        "wires": [
            [
                "cd7485589133f724"
            ],
            []
        ]
    },
    {
        "id": "cd7485589133f724",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Unlock Home",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "input_boolean.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.home_locked"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "x": 580,
        "y": 700,
        "wires": [
            [
                "1b0fdb091b292887",
                "bd0c2c63af0933cf",
                "f5b05178043ae019",
                "095ab5c043ad66f9"
            ]
        ]
    },
    {
        "id": "bd0c2c63af0933cf",
        "type": "api-current-state",
        "z": "8b6e3b319b97a18a",
        "name": "Spotify Playing?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.spotify",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 820,
        "y": 680,
        "wires": [
            [],
            [
                "418002de399fe74e"
            ]
        ]
    },
    {
        "id": "418002de399fe74e",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Play Music",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "script.play_music",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"player_id\":\"media_player.home_speakers\",\"player_name\":\"Home Speakers\",\"volume_level\":\"0.20\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "script",
        "service": "play_music",
        "x": 1010,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "aaed8017c7fa3d9f",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Lock Home",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "input_boolean.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.home_locked"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "x": 390,
        "y": 260,
        "wires": [
            [
                "1f6705cf3cbafbb7",
                "a7e21d1bcd19c4bb",
                "efd3221ac35f1134",
                "b543223065b94c6e",
                "75ad8e92f5bc17a9",
                "08e21dd5cc1cd5bb"
            ]
        ]
    },
    {
        "id": "fb489d3870b7e2c1",
        "type": "server-state-changed",
        "z": "8b6e3b319b97a18a",
        "name": "Leave Home Pressed",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "input_button.leave_home"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 240,
        "wires": [
            [
                "aaed8017c7fa3d9f"
            ]
        ]
    },
    {
        "id": "a946bcafdaf27ea7",
        "type": "comment",
        "z": "8b6e3b319b97a18a",
        "name": "Lights",
        "info": "",
        "x": 90,
        "y": 940,
        "wires": []
    },
    {
        "id": "cbb3944b1318ae9a",
        "type": "server-state-changed",
        "z": "8b6e3b319b97a18a",
        "name": "Wall Switch Right",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "switch.entrance_controller_wall_switch_right"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 300,
        "wires": [
            [
                "aaed8017c7fa3d9f"
            ]
        ]
    },
    {
        "id": "dbeb4ee98644a8d8",
        "type": "subflow:0eac027afb048323",
        "z": "8b6e3b319b97a18a",
        "name": "Entrance Lights - Wasp Box",
        "env": [
            {
                "name": "MOTION_SENSOR",
                "value": "binary_sensor.entrance_motion_occupancy",
                "type": "str"
            },
            {
                "name": "BRIGHTNESS_SENSOR",
                "value": "sensor.entrance_motion_illuminance",
                "type": "str"
            },
            {
                "name": "LIGHT_ENTITY",
                "value": "group.entrance_lights",
                "type": "str"
            },
            {
                "name": "LIGHT_THRESHOLD",
                "value": "0",
                "type": "num"
            },
            {
                "name": "MANUAL_TIMER",
                "value": "timer.entrance_automatic_lights_timer",
                "type": "str"
            }
        ],
        "x": 200,
        "y": 1000,
        "wires": []
    },
    {
        "id": "08e21dd5cc1cd5bb",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Reset Entrance Switch",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.entrance_controller_wall_switch_right"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_off",
        "x": 660,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "4b88c2bcdb2d79e2",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Turn On Dining Room Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.living_room_controller_wall_switch_one"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_on",
        "x": 1020,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "095ab5c043ad66f9",
        "type": "delay",
        "z": "8b6e3b319b97a18a",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 800,
        "y": 800,
        "wires": [
            [
                "4b88c2bcdb2d79e2"
            ]
        ]
    },
    {
        "id": "1b0fdb091b292887",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Turn Off Holidays Mode",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "input_boolean.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.holidays"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "x": 850,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "f5b05178043ae019",
        "type": "api-current-state",
        "z": "8b6e3b319b97a18a",
        "name": "AC Automations On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_ac_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 840,
        "y": 740,
        "wires": [
            [
                "a4a8668576e39a7c"
            ],
            []
        ]
    },
    {
        "id": "b6340d7128ba40be",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Start Manual Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.entrance_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "timer",
        "service": "start",
        "x": 430,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "fd0af924f29f1995",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Cancel Manual Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.cancel",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.entrance_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "timer",
        "service": "cancel",
        "x": 440,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "932d2d2de96d36dc",
        "type": "api-call-service",
        "z": "8b6e3b319b97a18a",
        "name": "Turn On Living Room AC Right",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.living_room_right_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_on",
        "x": 1550,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "e0a454d5b83a4b80",
        "type": "api-current-state",
        "z": "8b6e3b319b97a18a",
        "name": "Temp Living Room > 26?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "26",
        "halt_if_type": "num",
        "halt_if_compare": "gt",
        "entity_id": "sensor.living_room_thermometer_temperature",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1270,
        "y": 740,
        "wires": [
            [
                "932d2d2de96d36dc"
            ],
            []
        ]
    },
    {
        "id": "a4a8668576e39a7c",
        "type": "api-current-state",
        "z": "8b6e3b319b97a18a",
        "name": "AC running?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "climate.living_room_right_ac_controller",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1050,
        "y": 740,
        "wires": [
            [],
            [
                "e0a454d5b83a4b80"
            ]
        ]
    },
    {
        "id": "b8739f8dc7800051",
        "type": "subflow:2e02acbf157d8262",
        "z": "8b6e3b319b97a18a",
        "name": "Wall Switch - Single Left",
        "env": [
            {
                "name": "E1_TOPIC",
                "value": "entrance/controller_wall",
                "type": "str"
            },
            {
                "name": "E1_ACTION",
                "value": "single_left",
                "type": "str"
            }
        ],
        "x": 190,
        "y": 1060,
        "wires": [
            [
                "b6340d7128ba40be"
            ]
        ]
    },
    {
        "id": "550f59bf1ee783dc",
        "type": "subflow:2e02acbf157d8262",
        "z": "8b6e3b319b97a18a",
        "name": "Wall Switch - Double Left",
        "env": [
            {
                "name": "E1_TOPIC",
                "value": "entrance/controller_wall",
                "type": "str"
            },
            {
                "name": "E1_ACTION",
                "value": "double_left",
                "type": "str"
            }
        ],
        "x": 190,
        "y": 1120,
        "wires": [
            [
                "fd0af924f29f1995"
            ]
        ]
    },
    {
        "id": "286a018a3570c676",
        "type": "comment",
        "z": "95eb18db5e77ef4c",
        "name": "Lights",
        "info": "",
        "x": 90,
        "y": 60,
        "wires": []
    },
    {
        "id": "36e596819a5ac1c0",
        "type": "subflow:0eac027afb048323",
        "z": "95eb18db5e77ef4c",
        "d": true,
        "name": "Kitchen Lights - Wasp Box",
        "env": [
            {
                "name": "MOTION_SENSOR",
                "value": "binary_sensor.kitchen_motion_occupancy",
                "type": "str"
            },
            {
                "name": "BRIGHTNESS_SENSOR",
                "value": "sensor.kitchen_motion_illuminance",
                "type": "str"
            },
            {
                "name": "LIGHT_ENTITY",
                "value": "group.kitchen_lights",
                "type": "str"
            },
            {
                "name": "DISABLED_WHEN_SLEEPING",
                "value": "true",
                "type": "bool"
            }
        ],
        "x": 190,
        "y": 120,
        "wires": []
    },
    {
        "id": "723e192e7ee34dc0",
        "type": "comment",
        "z": "95eb18db5e77ef4c",
        "name": "AC",
        "info": "",
        "x": 90,
        "y": 380,
        "wires": []
    },
    {
        "id": "c6ccc4ccbf979859",
        "type": "subflow:44754de2761b91b1",
        "z": "95eb18db5e77ef4c",
        "name": "Wall Switch Left <-> Living Room AC",
        "env": [
            {
                "name": "AC",
                "value": "group.living_room_ac_controller",
                "type": "str"
            },
            {
                "name": "SWITCH",
                "value": "switch.kitchen_controller_wall_switch_left",
                "type": "str"
            }
        ],
        "x": 230,
        "y": 440,
        "wires": []
    },
    {
        "id": "74c4d23713f6c9e3",
        "type": "server-state-changed",
        "z": "95eb18db5e77ef4c",
        "name": "No vibration in countersink for 5m?",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.kitchen_vibration_countersink"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 220,
        "y": 240,
        "wires": [
            [
                "f0284d0786caa115"
            ],
            [
                "be5fd4b076193373"
            ]
        ]
    },
    {
        "id": "be5fd4b076193373",
        "type": "api-call-service",
        "z": "95eb18db5e77ef4c",
        "name": "Turn On Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.kitchen_controller_wall_switch_right"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_on",
        "x": 480,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "f0284d0786caa115",
        "type": "api-call-service",
        "z": "95eb18db5e77ef4c",
        "name": "Turn Off Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.kitchen_controller_wall_switch_right"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_off",
        "x": 480,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "64f52d03bd37dfeb",
        "type": "comment",
        "z": "751c2276bdb4df53",
        "name": "TV Lights",
        "info": "",
        "x": 100,
        "y": 60,
        "wires": []
    },
    {
        "id": "0e844f3af9cc9eeb",
        "type": "server-state-changed",
        "z": "751c2276bdb4df53",
        "name": "TV not playing for 5s?",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "media_player.living_room_media_center"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "playing",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 180,
        "wires": [
            [
                "077e71016bbb08c3"
            ],
            [
                "da0de2f531c36dd8"
            ]
        ]
    },
    {
        "id": "da0de2f531c36dd8",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Turn On TV Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.living_room_tv_lightstrip"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 430,
        "y": 220,
        "wires": [
            [
                "d102125aa8790a6f"
            ]
        ]
    },
    {
        "id": "077e71016bbb08c3",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Turn Off TV Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.living_room_tv_lightstrip"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 430,
        "y": 120,
        "wires": [
            [
                "814a73ded53825de"
            ]
        ]
    },
    {
        "id": "499439f14f4a03de",
        "type": "comment",
        "z": "751c2276bdb4df53",
        "name": "Curtains",
        "info": "",
        "x": 100,
        "y": 340,
        "wires": []
    },
    {
        "id": "7aa3a001a71495c6",
        "type": "inject",
        "z": "751c2276bdb4df53",
        "name": "At 12:30",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "30 12 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 400,
        "wires": [
            [
                "0889bfbe8132a565"
            ]
        ]
    },
    {
        "id": "452e1c29f99147b6",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Open Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.open_cover",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.living_room_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "open_cover",
        "x": 760,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "dd174c42c172453c",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Close Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.close_cover",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.living_room_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "close_cover",
        "x": 560,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "9a2e70aa690a4fa4",
        "type": "server-state-changed",
        "z": "751c2276bdb4df53",
        "name": "Sunset",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sun.sun"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "below_horizon",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 520,
        "wires": [
            [
                "f370728beaeb81c9"
            ],
            []
        ]
    },
    {
        "id": "c2eebc508f495c94",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "Curtains Closed?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "closed",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "cover.living_room_curtains",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 550,
        "y": 400,
        "wires": [
            [
                "452e1c29f99147b6"
            ],
            []
        ]
    },
    {
        "id": "f370728beaeb81c9",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "Curtains Opened?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "closed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "cover.living_room_curtains",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 350,
        "y": 520,
        "wires": [
            [
                "dd174c42c172453c"
            ],
            []
        ]
    },
    {
        "id": "a95e7f1cccf22a09",
        "type": "comment",
        "z": "751c2276bdb4df53",
        "name": "Speakers",
        "info": "",
        "x": 100,
        "y": 680,
        "wires": []
    },
    {
        "id": "f891a0238888a2b3",
        "type": "server-state-changed",
        "z": "751c2276bdb4df53",
        "name": "TV Playing 15s?",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "media_player.living_room_media_center"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "playing",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "15",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 740,
        "wires": [
            [
                "de65f32f36812a2c"
            ],
            []
        ]
    },
    {
        "id": "de65f32f36812a2c",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "Speakers Playing?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.home_speakers",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 370,
        "y": 740,
        "wires": [
            [
                "c1349d450a3cfcf2"
            ],
            []
        ]
    },
    {
        "id": "c1349d450a3cfcf2",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Pause Speakers",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "media_player.media_pause",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.home_speakers"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "media_player",
        "service": "media_pause",
        "x": 580,
        "y": 740,
        "wires": [
            [
                "77fa39109f21bded"
            ]
        ]
    },
    {
        "id": "d102125aa8790a6f",
        "type": "delay",
        "z": "751c2276bdb4df53",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 620,
        "y": 220,
        "wires": [
            [
                "5a78a5079768eb76"
            ]
        ]
    },
    {
        "id": "ad696b405543e680",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "TV Lights Turned On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.living_room_tv_lightstrip",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1000,
        "y": 220,
        "wires": [
            [],
            [
                "da0de2f531c36dd8"
            ]
        ]
    },
    {
        "id": "814a73ded53825de",
        "type": "delay",
        "z": "751c2276bdb4df53",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 620,
        "y": 120,
        "wires": [
            [
                "84ce0bddc65d2a69"
            ]
        ]
    },
    {
        "id": "84ce0bddc65d2a69",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "TV Playing?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.living_room_media_center",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 790,
        "y": 120,
        "wires": [
            [],
            [
                "2da559c8ee37d813"
            ]
        ]
    },
    {
        "id": "2da559c8ee37d813",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "TV Lights Turned On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.living_room_tv_lightstrip",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1000,
        "y": 120,
        "wires": [
            [
                "077e71016bbb08c3"
            ],
            []
        ]
    },
    {
        "id": "5a78a5079768eb76",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "TV Playing?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.living_room_media_center",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 790,
        "y": 220,
        "wires": [
            [
                "ad696b405543e680"
            ],
            []
        ]
    },
    {
        "id": "bfb9b8a1c9ec4f4b",
        "type": "comment",
        "z": "751c2276bdb4df53",
        "name": "AC - Humidity",
        "info": "",
        "x": 110,
        "y": 900,
        "wires": []
    },
    {
        "id": "be3d905cd1f44bec",
        "type": "server-state-changed",
        "z": "751c2276bdb4df53",
        "name": "Humidity > 75%",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.living_room_thermometer_humidity"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "75",
        "ifStateType": "num",
        "ifStateOperator": "gte",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 1020,
        "wires": [
            [
                "16adf3ec4e9952c8"
            ],
            []
        ]
    },
    {
        "id": "16adf3ec4e9952c8",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "Home Locked?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_locked",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 360,
        "y": 1020,
        "wires": [
            [
                "479108a7bd2da13e"
            ],
            []
        ]
    },
    {
        "id": "f3c9368ece566626",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Dry mode on ACs",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.set_temperature",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.living_room_ac_controller"
        ],
        "labelId": [],
        "data": "{ \"hvac_mode\": \"dry\", \"temperature\": \"26\" }",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "set_temperature",
        "x": 970,
        "y": 980,
        "wires": [
            [
                "90d059eca3a4f797"
            ]
        ]
    },
    {
        "id": "90d059eca3a4f797",
        "type": "ha-wait-until",
        "z": "751c2276bdb4df53",
        "name": "Humidity < 60%",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "entities": {
            "entity": [
                "sensor.living_room_thermometer_humidity"
            ],
            "substring": [],
            "regex": []
        },
        "property": "state",
        "comparator": "lte",
        "value": "55",
        "valueType": "num",
        "timeout": "120",
        "timeoutType": "num",
        "timeoutUnits": "minutes",
        "checkCurrentState": true,
        "blockInputOverrides": true,
        "outputProperties": [],
        "entityLocation": "data",
        "entityLocationType": "none",
        "x": 1180,
        "y": 980,
        "wires": [
            [
                "392e14aa19a915d0"
            ],
            [
                "c8fe07cd1622552b"
            ]
        ]
    },
    {
        "id": "392e14aa19a915d0",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Turn Off ACs",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.living_room_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 1370,
        "y": 940,
        "wires": [
            [
                "6d154cb9e6ae8ac3"
            ]
        ]
    },
    {
        "id": "dd348d43cad75d11",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "AC off?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "group.living_room_ac_controller",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 780,
        "y": 1020,
        "wires": [
            [
                "f3c9368ece566626",
                "58b05fa0401050a8"
            ],
            []
        ]
    },
    {
        "id": "58b05fa0401050a8",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Send Notification",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "notify.notify",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"title\":\"Humidity too high\",\"message\":\"Turning On ACs\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "notify",
        "x": 970,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "6d154cb9e6ae8ac3",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Send Notification",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "notify.notify",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"title\":\"Humidity under control\",\"message\":\"Turning Off ACs\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "notify",
        "x": 1570,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "c8fe07cd1622552b",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Turn Off ACs",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.living_room_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 1370,
        "y": 1000,
        "wires": [
            [
                "abe36cb0a8328078"
            ]
        ]
    },
    {
        "id": "abe36cb0a8328078",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Send Notification",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "notify.notify",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"title\":\"Humidity still not under control\",\"message\":\"Turning Off ACs with humidity still too high\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "notify",
        "x": 1570,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "479108a7bd2da13e",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "AC Automations On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_ac_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 580,
        "y": 1020,
        "wires": [
            [
                "dd348d43cad75d11"
            ],
            []
        ]
    },
    {
        "id": "27baa0ff36bd5cd7",
        "type": "comment",
        "z": "751c2276bdb4df53",
        "name": "Remote Controllers",
        "info": "",
        "x": 130,
        "y": 1180,
        "wires": []
    },
    {
        "id": "2c2f19cc50e02890",
        "type": "subflow:64b48be79869231a",
        "z": "751c2276bdb4df53",
        "name": "Sofa Controller",
        "env": [
            {
                "name": "MQTT_TOPIC",
                "value": "zigbee2mqtt/living_room/controller_sofa",
                "type": "str"
            }
        ],
        "x": 160,
        "y": 1420,
        "wires": [
            [
                "0c2993ef0244d0fa"
            ],
            [
                "7e3c98cd2d2ba205"
            ],
            [
                "4fcfa663066e1a10"
            ],
            [],
            [
                "5d83e048a0fc527b"
            ],
            [],
            [
                "b1c09774694667f7"
            ],
            [
                "eb1cdf8fb394c26b"
            ]
        ]
    },
    {
        "id": "0c2993ef0244d0fa",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Toggle Dining Room Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.living_room_controller_wall_switch_one"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "toggle",
        "x": 470,
        "y": 1260,
        "wires": [
            [
                "2375ce59f65abe10"
            ]
        ]
    },
    {
        "id": "b1c09774694667f7",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Toggle AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.living_room_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "toggle",
        "x": 430,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "eb1cdf8fb394c26b",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Toggle Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.living_room_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "toggle",
        "x": 440,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "4fcfa663066e1a10",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Toggle Living Room Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bedroom_controller_wall_switch_two"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "toggle",
        "x": 470,
        "y": 1440,
        "wires": [
            [
                "8d41b1d57fa3b081"
            ]
        ]
    },
    {
        "id": "5d83e048a0fc527b",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Toggle Kitchen Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.kitchen_controller_wall_switch_right"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "toggle",
        "x": 460,
        "y": 1500,
        "wires": [
            [
                "50fe15ad504432bf"
            ]
        ]
    },
    {
        "id": "2375ce59f65abe10",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Start Living Room Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.living_room_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "start",
        "x": 730,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "50fe15ad504432bf",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Start Kitchen Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.kitchen_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "start",
        "x": 690,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "8d41b1d57fa3b081",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Start Living Room Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.living_room_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "start",
        "x": 730,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "7e3c98cd2d2ba205",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Turn Off All Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.kitchen_controller_wall_switch_right",
            "switch.living_room_controller_wall_switch_one",
            "switch.living_room_controller_wall_switch_two"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_off",
        "x": 450,
        "y": 1360,
        "wires": [
            [
                "4c1e1d209b9cc9a7",
                "fcb252a6326971d2"
            ]
        ]
    },
    {
        "id": "4c1e1d209b9cc9a7",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Start Living Room Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.living_room_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "start",
        "x": 690,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "fcb252a6326971d2",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Start Kitchen Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.kitchen_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "start",
        "x": 670,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "77fa39109f21bded",
        "type": "ha-wait-until",
        "z": "751c2276bdb4df53",
        "name": "Wait until TV Stops",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "entities": {
            "entity": [
                "media_player.living_room_media_center"
            ],
            "substring": [],
            "regex": []
        },
        "property": "state",
        "comparator": "is_not",
        "value": "playing",
        "valueType": "str",
        "timeout": "120",
        "timeoutType": "num",
        "timeoutUnits": "minutes",
        "checkCurrentState": true,
        "blockInputOverrides": true,
        "outputProperties": [],
        "entityLocation": "data",
        "entityLocationType": "none",
        "x": 790,
        "y": 740,
        "wires": [
            [
                "f9276bb2baf2ae0e"
            ],
            []
        ]
    },
    {
        "id": "dc4d4f94b86cfb0b",
        "type": "api-call-service",
        "z": "751c2276bdb4df53",
        "name": "Start Speakers",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "media_player.media_play",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.home_speakers"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "media_player",
        "service": "media_play",
        "x": 1240,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "f9276bb2baf2ae0e",
        "type": "ha-wait-until",
        "z": "751c2276bdb4df53",
        "name": "Wait if TV Starts 30s",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "entities": {
            "entity": [
                "media_player.living_room_media_center"
            ],
            "substring": [],
            "regex": []
        },
        "property": "state",
        "comparator": "is",
        "value": "playing",
        "valueType": "str",
        "timeout": "30",
        "timeoutType": "num",
        "timeoutUnits": "seconds",
        "checkCurrentState": true,
        "blockInputOverrides": true,
        "outputProperties": [],
        "entityLocation": "data",
        "entityLocationType": "none",
        "x": 1020,
        "y": 740,
        "wires": [
            [],
            [
                "dc4d4f94b86cfb0b"
            ]
        ]
    },
    {
        "id": "0889bfbe8132a565",
        "type": "api-current-state",
        "z": "751c2276bdb4df53",
        "name": "On Holidays?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.holidays",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 340,
        "y": 400,
        "wires": [
            [],
            [
                "c2eebc508f495c94"
            ]
        ]
    },
    {
        "id": "8e9bdb95e32233dc",
        "type": "comment",
        "z": "03c58ed96b7b8395",
        "name": "AC",
        "info": "",
        "x": 90,
        "y": 60,
        "wires": []
    },
    {
        "id": "15a69f485a813c42",
        "type": "server-state-changed",
        "z": "03c58ed96b7b8395",
        "name": "No presence for 5m",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.office_motion_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 360,
        "wires": [
            [
                "ed81d30112109096"
            ],
            []
        ]
    },
    {
        "id": "211bf5dddd5fd4ea",
        "type": "api-call-service",
        "z": "03c58ed96b7b8395",
        "name": "Turn Off Office AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.office_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 830,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "fca036d1ffe4ce55",
        "type": "api-call-service",
        "z": "03c58ed96b7b8395",
        "name": "Turn On Office AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.office_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_on",
        "x": 1010,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "57fe55679a62a588",
        "type": "server-state-changed",
        "z": "03c58ed96b7b8395",
        "name": "Presence for 1m",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.office_motion_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "1",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 120,
        "wires": [
            [
                "ad52222854a835ae"
            ],
            []
        ]
    },
    {
        "id": "54ddf8b425e6f199",
        "type": "server-state-changed",
        "z": "03c58ed96b7b8395",
        "name": "Door Closed for 5m",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.office_door_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 240,
        "wires": [
            [
                "f1a093c35cfd0de2"
            ],
            []
        ]
    },
    {
        "id": "c0b833d4ce06eccc",
        "type": "comment",
        "z": "03c58ed96b7b8395",
        "name": "Lights",
        "info": "",
        "x": 90,
        "y": 1220,
        "wires": []
    },
    {
        "id": "719b81c136ea08f8",
        "type": "comment",
        "z": "03c58ed96b7b8395",
        "name": "Remote Controllers",
        "info": "",
        "x": 130,
        "y": 920,
        "wires": []
    },
    {
        "id": "803fcf8fadf3796c",
        "type": "subflow:44754de2761b91b1",
        "z": "03c58ed96b7b8395",
        "name": "Entrance Switch Two <-> Office AC",
        "env": [
            {
                "name": "AC",
                "value": "climate.office_ac_controller",
                "type": "str"
            },
            {
                "name": "SWITCH",
                "value": "switch.office_controller_wall_switch_two",
                "type": "str"
            }
        ],
        "x": 200,
        "y": 460,
        "wires": []
    },
    {
        "id": "b48b25603d80bfc0",
        "type": "server-state-changed",
        "z": "03c58ed96b7b8395",
        "name": "Too Hot",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.office_thermometer_temperature"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "$entities('input_number.too_hot').state",
        "ifStateType": "jsonata",
        "ifStateOperator": "gte",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 180,
        "wires": [
            [
                "845d433260753bda"
            ],
            []
        ]
    },
    {
        "id": "845d433260753bda",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "Presence?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.office_motion_occupancy",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 180,
        "wires": [
            [
                "2c63e685af7724a8"
            ],
            []
        ]
    },
    {
        "id": "0f0015805e1ca8b4",
        "type": "comment",
        "z": "03c58ed96b7b8395",
        "name": "Vacuum Cleaner",
        "info": "",
        "x": 120,
        "y": 620,
        "wires": []
    },
    {
        "id": "f291de1a88ea4736",
        "type": "server-state-changed",
        "z": "03c58ed96b7b8395",
        "name": "Vacuum started",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.vacuum_cleaner_status"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "cleaning",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 680,
        "wires": [
            [
                "3d377b5c43c0a7cb"
            ],
            []
        ]
    },
    {
        "id": "3d377b5c43c0a7cb",
        "type": "api-call-service",
        "z": "03c58ed96b7b8395",
        "name": "Toggle Home Vacuumed",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "input_boolean.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.home_vacuumed"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "x": 410,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "442e056c51b2b92e",
        "type": "inject",
        "z": "03c58ed96b7b8395",
        "name": "At 16:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 16 * * 1,2,3,4,5",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 780,
        "wires": [
            [
                "fd4232a462d66e9a"
            ]
        ]
    },
    {
        "id": "3d8e18f5d75109b7",
        "type": "api-call-service",
        "z": "03c58ed96b7b8395",
        "name": "Vacuum Home",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "vacuum.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "vacuum.vacuum_cleaner"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "vacuum",
        "service": "start",
        "x": 760,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "fd4232a462d66e9a",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "Home Vacuumed?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_vacuumed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 780,
        "wires": [
            [],
            [
                "8abdb2e4879ddc36"
            ]
        ]
    },
    {
        "id": "fbb8c452b04100a3",
        "type": "subflow:64b48be79869231a",
        "z": "03c58ed96b7b8395",
        "name": "Desk Controller",
        "env": [
            {
                "name": "MQTT_TOPIC",
                "value": "zigbee2mqtt/office/controller_desk",
                "type": "str"
            }
        ],
        "x": 160,
        "y": 1040,
        "wires": [
            [
                "31cd3317a90a3265"
            ],
            [],
            [],
            [],
            [],
            [],
            [
                "1eccf985e02339ef"
            ],
            []
        ]
    },
    {
        "id": "31cd3317a90a3265",
        "type": "api-call-service",
        "z": "03c58ed96b7b8395",
        "name": "Toggle Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.office_lights"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "toggle",
        "x": 370,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "1eccf985e02339ef",
        "type": "api-call-service",
        "z": "03c58ed96b7b8395",
        "name": "Toggle AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.office_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "toggle",
        "x": 370,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "ad52222854a835ae",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "Too Hot?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "$entities('input_number.too_hot').state",
        "halt_if_type": "jsonata",
        "halt_if_compare": "gte",
        "entity_id": "sensor.office_thermometer_temperature",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 320,
        "y": 120,
        "wires": [
            [
                "2c63e685af7724a8"
            ],
            []
        ]
    },
    {
        "id": "163a3e85d5a378ed",
        "type": "subflow:0eac027afb048323",
        "z": "03c58ed96b7b8395",
        "name": "Office Lights - Wasp Box",
        "env": [
            {
                "name": "MOTION_SENSOR",
                "value": "binary_sensor.office_motion_occupancy",
                "type": "str"
            },
            {
                "name": "BRIGHTNESS_SENSOR",
                "value": "sensor.office_motion_illuminance",
                "type": "str"
            },
            {
                "name": "LIGHT_ENTITY",
                "value": "group.office_lights",
                "type": "str"
            },
            {
                "name": "DOOR_SENSOR",
                "value": "binary_sensor.office_door_contact",
                "type": "str"
            },
            {
                "name": "LIGHT_THRESHOLD",
                "value": "350",
                "type": "num"
            },
            {
                "name": "MANUAL_TIMER",
                "value": "timer.office_automatic_lights_timer",
                "type": "str"
            }
        ],
        "x": 190,
        "y": 1280,
        "wires": []
    },
    {
        "id": "f1a093c35cfd0de2",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "AC Automations On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_ac_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 780,
        "y": 180,
        "wires": [
            [
                "fca036d1ffe4ce55"
            ],
            []
        ]
    },
    {
        "id": "ed81d30112109096",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "AC Automations On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_ac_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 380,
        "y": 360,
        "wires": [
            [
                "1b99ca262306ddbe"
            ],
            []
        ]
    },
    {
        "id": "8abdb2e4879ddc36",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "Are there Guests?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.guests",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 550,
        "y": 780,
        "wires": [
            [],
            [
                "3d8e18f5d75109b7"
            ]
        ]
    },
    {
        "id": "1b99ca262306ddbe",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "Are there Guests?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.guests",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 610,
        "y": 360,
        "wires": [
            [],
            [
                "211bf5dddd5fd4ea"
            ]
        ]
    },
    {
        "id": "2c63e685af7724a8",
        "type": "api-current-state",
        "z": "03c58ed96b7b8395",
        "name": "Are there Guests?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.guests",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 530,
        "y": 140,
        "wires": [
            [],
            [
                "f1a093c35cfd0de2"
            ]
        ]
    },
    {
        "id": "0bb2f4bac61a099f",
        "type": "subflow:9ae4ced5f6035fca",
        "z": "03c58ed96b7b8395",
        "name": "Wall Switch - Top Button",
        "env": [
            {
                "name": "Z1_TOPIC",
                "value": "office/controller_wall",
                "type": "str"
            },
            {
                "name": "Z1_ACTION",
                "value": "single_top",
                "type": "str"
            }
        ],
        "x": 190,
        "y": 1340,
        "wires": [
            [
                "4167842ce9d58bb3"
            ]
        ]
    },
    {
        "id": "4167842ce9d58bb3",
        "type": "api-call-service",
        "z": "03c58ed96b7b8395",
        "name": "Start Manual Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.office_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "timer",
        "service": "start",
        "x": 430,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "21a21c921ce7a64f",
        "type": "comment",
        "z": "fa6bb9cfa58677c8",
        "name": "Going to Sleep",
        "info": "",
        "x": 120,
        "y": 560,
        "wires": []
    },
    {
        "id": "a48dcada2a38d841",
        "type": "server-state-changed",
        "z": "fa6bb9cfa58677c8",
        "name": "Door Closed 2m",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.bedroom_door_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "2",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 1000,
        "wires": [
            [
                "33a13bfcc32ef764"
            ],
            []
        ]
    },
    {
        "id": "33a13bfcc32ef764",
        "type": "light-scheduler-filter",
        "z": "fa6bb9cfa58677c8",
        "settings": "b68f145e9b5f00ba",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":1,\"mod\":360}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":2,\"mod\":360}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":3,\"mod\":360}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":4,\"mod\":360}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":5,\"mod\":360}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":6,\"mod\":360}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":0,\"mod\":360}},{\"start\":{\"dow\":1,\"mod\":1380},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":1380},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":1380},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":1380},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":1380},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":1380},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":1380},\"end\":{\"dow\":1,\"mod\":0}}]",
        "name": "Night Time?",
        "onlyWhenDark": false,
        "scheduleRndMax": 0,
        "sunElevationThreshold": 6,
        "sunShowElevationInStatus": false,
        "x": 350,
        "y": 1000,
        "wires": [
            [
                "f79e69ba338a0b8d"
            ],
            []
        ]
    },
    {
        "id": "9019d74dd955c42c",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn On Sleeping Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.bedroom_sleeping"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "start",
        "x": 750,
        "y": 940,
        "wires": [
            [
                "8b93b84ceca7782f",
                "4874c2e2d65f03de",
                "61190aab1cf44a38",
                "32c7c71ecd2dbd46",
                "aff1cc67187cc2cc",
                "0f56b2703068833f",
                "6151e9658f45cdf0",
                "efec944ea44f7e8e"
            ]
        ]
    },
    {
        "id": "095a869c72667350",
        "type": "comment",
        "z": "fa6bb9cfa58677c8",
        "name": "AC",
        "info": "",
        "x": 90,
        "y": 60,
        "wires": []
    },
    {
        "id": "9da6d3118bc04433",
        "type": "server-state-changed",
        "z": "fa6bb9cfa58677c8",
        "name": "Door Opened 5m",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.bedroom_door_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 220,
        "wires": [
            [
                "5bfbcc15a80e8945"
            ],
            []
        ]
    },
    {
        "id": "5bfbcc15a80e8945",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Bedroom AC running?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "climate.bedroom_ac_controller",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 380,
        "y": 220,
        "wires": [
            [
                "e1eabf25edbbf70f"
            ],
            []
        ]
    },
    {
        "id": "c03a59b5b2299844",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Bedroom AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.bedroom_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 1020,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "fce951f1ac71d4a5",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn On Bedroom AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.bedroom_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_on",
        "x": 620,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "d1a676cc309a4be9",
        "type": "server-state-changed",
        "z": "fa6bb9cfa58677c8",
        "name": "Door Closed 2m?",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.bedroom_door_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "2",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 380,
        "wires": [
            [
                "c71b1eaaa42f8475"
            ],
            []
        ]
    },
    {
        "id": "b44d08f8b019f1f7",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn On Living Room AC Right",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.living_room_right_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_on",
        "x": 1310,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "a7516f939caeaa3b",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Office AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.living_room_ac_controller",
            "climate.office_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 1290,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "4874c2e2d65f03de",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Are there Guests?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.guests",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1050,
        "y": 1020,
        "wires": [
            [],
            [
                "ab859369e73002d2",
                "a7516f939caeaa3b"
            ]
        ]
    },
    {
        "id": "61190aab1cf44a38",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Media Players",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "media_player.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.home_speakers",
            "media_player.living_room_tv"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "media_player",
        "service": "turn_off",
        "x": 1060,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "8b93b84ceca7782f",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Close All Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.close_cover",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.home_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "close_cover",
        "x": 1050,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "3224e9d5fcf7be0c",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Sleeping Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.finish",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.bedroom_sleeping"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "finish",
        "x": 410,
        "y": 1500,
        "wires": [
            [
                "ec065520cae675a9",
                "10e767ea0801a3ee",
                "d723371b6e77c7ea",
                "19b1aabf7936aae3"
            ]
        ]
    },
    {
        "id": "ec065520cae675a9",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Open Home Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.open_cover",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.home_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "open_cover",
        "x": 700,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "10e767ea0801a3ee",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Play Music",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "script.play_music",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"player_id\":\"media_player.home_speakers\",\"player_name\":\"Home Speakers\",\"volume_level\":\"0.15\",\"playlist\":\"spotify:playlist:37i9dQZF1EIdJI2xV2PSSs\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "script",
        "service": "play_music",
        "x": 670,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "84140c0780055dde",
        "type": "comment",
        "z": "fa6bb9cfa58677c8",
        "name": "Lights",
        "info": "",
        "x": 90,
        "y": 3020,
        "wires": []
    },
    {
        "id": "cd60b9c858879302",
        "type": "subflow:44754de2761b91b1",
        "z": "fa6bb9cfa58677c8",
        "name": "Wall Switch Three <-> Bedroom AC",
        "env": [
            {
                "name": "AC",
                "value": "climate.bedroom_ac_controller",
                "type": "str"
            },
            {
                "name": "SWITCH",
                "value": "switch.bedroom_controller_wall_switch_three",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 120,
        "wires": []
    },
    {
        "id": "34820c12e1373123",
        "type": "subflow:a9c82ea585250d5c",
        "z": "fa6bb9cfa58677c8",
        "name": "Entrance Switch Two <-> Bed Light",
        "env": [
            {
                "name": "LIGHT",
                "value": "light.bedroom_light_bed",
                "type": "str"
            },
            {
                "name": "SWITCH",
                "value": "switch.bedroom_controller_wall_switch_two",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 3080,
        "wires": []
    },
    {
        "id": "04a78ed0b35dd113",
        "type": "server-state-changed",
        "z": "fa6bb9cfa58677c8",
        "name": "Go To Sleep Pressed",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "input_button.go_to_sleep"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 940,
        "wires": [
            [
                "9019d74dd955c42c"
            ]
        ]
    },
    {
        "id": "821d98900b6da627",
        "type": "server-state-changed",
        "z": "fa6bb9cfa58677c8",
        "name": "Wake Up Pressed",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "input_button.wake_up"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 1500,
        "wires": [
            [
                "3224e9d5fcf7be0c"
            ]
        ]
    },
    {
        "id": "b28125ea8a0e1090",
        "type": "comment",
        "z": "fa6bb9cfa58677c8",
        "name": "Waking Up",
        "info": "",
        "x": 100,
        "y": 1320,
        "wires": []
    },
    {
        "id": "06a4fad738cc9ad9",
        "type": "comment",
        "z": "fa6bb9cfa58677c8",
        "name": "Curtains",
        "info": "",
        "x": 100,
        "y": 1880,
        "wires": []
    },
    {
        "id": "8793652b99a68141",
        "type": "inject",
        "z": "fa6bb9cfa58677c8",
        "name": "At 12:30",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "30 12 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1940,
        "wires": [
            [
                "a9df5d043cd4f9b2"
            ]
        ]
    },
    {
        "id": "eaf045020f53888a",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Open Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.open_cover",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.bedroom_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "open_cover",
        "x": 760,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "2613e3260eaae516",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Close Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.close_cover",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.bedroom_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "close_cover",
        "x": 560,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "b559f4ec1dba92aa",
        "type": "server-state-changed",
        "z": "fa6bb9cfa58677c8",
        "name": "Sunset",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sun.sun"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "below_horizon",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 2040,
        "wires": [
            [
                "3491676d80a4a3c5"
            ],
            []
        ]
    },
    {
        "id": "02644b8f9246b4b2",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Curtains Closed?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "closed",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "cover.bedroom_curtains",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 550,
        "y": 1940,
        "wires": [
            [
                "eaf045020f53888a"
            ],
            []
        ]
    },
    {
        "id": "3491676d80a4a3c5",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Curtains Opened?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "closed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "cover.bedroom_curtains",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 350,
        "y": 2040,
        "wires": [
            [
                "2613e3260eaae516"
            ],
            []
        ]
    },
    {
        "id": "a9df5d043cd4f9b2",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "On Holidays?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.holidays",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 340,
        "y": 1940,
        "wires": [
            [],
            [
                "02644b8f9246b4b2"
            ]
        ]
    },
    {
        "id": "cd46f32f960f7e84",
        "type": "comment",
        "z": "fa6bb9cfa58677c8",
        "name": "Remote Controllers",
        "info": "",
        "x": 130,
        "y": 2400,
        "wires": []
    },
    {
        "id": "cc944a5380311c08",
        "type": "subflow:64b48be79869231a",
        "z": "fa6bb9cfa58677c8",
        "name": "Bed Controller",
        "env": [
            {
                "name": "MQTT_TOPIC",
                "value": "zigbee2mqtt/bedroom/controller_bed",
                "type": "str"
            }
        ],
        "x": 150,
        "y": 2660,
        "wires": [
            [
                "6e8cf105234b6b3c"
            ],
            [
                "18cb02ec1b3f4b7d"
            ],
            [
                "df3a410d4250e62c"
            ],
            [
                "62383bec320dca89"
            ],
            [
                "fac2dd333752b7c9"
            ],
            [
                "c72884cad5c5fe5d"
            ],
            [
                "88071f4198d6ac45"
            ],
            [
                "0ee7cd3f6f321be1"
            ]
        ]
    },
    {
        "id": "6e8cf105234b6b3c",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Toggle Ceiling Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bedroom_controller_wall_switch_one"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "toggle",
        "x": 450,
        "y": 2460,
        "wires": [
            [
                "2b8e4227bc8eb874"
            ]
        ]
    },
    {
        "id": "88071f4198d6ac45",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Toggle AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.bedroom_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "toggle",
        "x": 430,
        "y": 2840,
        "wires": [
            []
        ]
    },
    {
        "id": "0ee7cd3f6f321be1",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Toggle Curtains",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "cover.toggle",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.bedroom_curtains"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "cover",
        "service": "toggle",
        "x": 440,
        "y": 2900,
        "wires": [
            []
        ]
    },
    {
        "id": "df3a410d4250e62c",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Increase Bed Light +20%",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.bedroom_light_bed"
        ],
        "labelId": [],
        "data": "{ \"brightness_step_pct\": 20 }",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 470,
        "y": 2600,
        "wires": [
            []
        ]
    },
    {
        "id": "fac2dd333752b7c9",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Decrease Bed Light Brightness",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.bedroom_light_bed"
        ],
        "labelId": [],
        "data": "{ \"brightness_step_pct\": -20 }",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 490,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "62383bec320dca89",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Set Bed Light to 100%",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.bedroom_light_bed"
        ],
        "labelId": [],
        "data": "{ \"brightness_pct\": 100 }",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 460,
        "y": 2660,
        "wires": [
            []
        ]
    },
    {
        "id": "c72884cad5c5fe5d",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Bed Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.bedroom_light_bed"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 450,
        "y": 2780,
        "wires": [
            []
        ]
    },
    {
        "id": "bd9f7115a617b2cc",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Temp Living Room > 26?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "26",
        "halt_if_type": "num",
        "halt_if_compare": "gt",
        "entity_id": "sensor.living_room_thermometer_temperature",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1030,
        "y": 260,
        "wires": [
            [
                "b44d08f8b019f1f7"
            ],
            []
        ]
    },
    {
        "id": "e1eabf25edbbf70f",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Sleeping?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "idle",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "timer.bedroom_sleeping",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 580,
        "y": 220,
        "wires": [
            [],
            [
                "a97e8b63e27a9d12"
            ]
        ]
    },
    {
        "id": "32c7c71ecd2dbd46",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Ceiling Light On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.bedroom_controller_wall_switch_one",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1050,
        "y": 1160,
        "wires": [
            [
                "8e760635a748b647",
                "aa845a45912d372d"
            ],
            []
        ]
    },
    {
        "id": "8e760635a748b647",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Ceiling Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bedroom_controller_wall_switch_one"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_off",
        "x": 1300,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "aa845a45912d372d",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn On Bed Light",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bedroom_controller_wall_switch_two"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_on",
        "x": 1290,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "04abcd31e0034c1a",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Wake Up",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "input_button.press",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_button.wake_up"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "input_button",
        "service": "press",
        "x": 680,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "18cb02ec1b3f4b7d",
        "type": "light-scheduler-filter",
        "z": "fa6bb9cfa58677c8",
        "settings": "b68f145e9b5f00ba",
        "events": "[{\"start\":{\"dow\":1,\"mod\":300},\"end\":{\"dow\":1,\"mod\":840}},{\"start\":{\"dow\":2,\"mod\":300},\"end\":{\"dow\":2,\"mod\":840}},{\"start\":{\"dow\":3,\"mod\":300},\"end\":{\"dow\":3,\"mod\":840}},{\"start\":{\"dow\":4,\"mod\":300},\"end\":{\"dow\":4,\"mod\":840}},{\"start\":{\"dow\":5,\"mod\":300},\"end\":{\"dow\":5,\"mod\":840}},{\"start\":{\"dow\":6,\"mod\":300},\"end\":{\"dow\":6,\"mod\":840}},{\"start\":{\"dow\":0,\"mod\":300},\"end\":{\"dow\":0,\"mod\":840}}]",
        "name": "Waking Up Time?",
        "onlyWhenDark": false,
        "scheduleRndMax": 0,
        "sunElevationThreshold": 6,
        "sunShowElevationInStatus": false,
        "x": 450,
        "y": 2540,
        "wires": [
            [
                "04abcd31e0034c1a"
            ],
            [
                "9fcd9c289f96c856"
            ]
        ]
    },
    {
        "id": "9fcd9c289f96c856",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Go to Sleep",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "input_button.press",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_button.go_to_sleep"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "input_button",
        "service": "press",
        "x": 690,
        "y": 2560,
        "wires": [
            []
        ]
    },
    {
        "id": "aff1cc67187cc2cc",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Some Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.entrance_lights",
            "group.hall_lights",
            "group.kitchen_lights",
            "group.living_room_lights"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_off",
        "x": 1060,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "ab859369e73002d2",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Office Lights",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.office_lights"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_off",
        "x": 1300,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "0f56b2703068833f",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Living Room ACs",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.living_room_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 1070,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "f79e69ba338a0b8d",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Sleeping?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "idle",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "timer.bedroom_sleeping",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 520,
        "y": 1000,
        "wires": [
            [],
            [
                "9019d74dd955c42c"
            ]
        ]
    },
    {
        "id": "0799e9b147939cc2",
        "type": "subflow:0eac027afb048323",
        "z": "fa6bb9cfa58677c8",
        "name": "Bedroom Lights - Wasp Box",
        "env": [
            {
                "name": "MOTION_SENSOR",
                "value": "binary_sensor.bedroom_motion_occupancy",
                "type": "str"
            },
            {
                "name": "BRIGHTNESS_SENSOR",
                "value": "sensor.bedroom_motion_illuminance",
                "type": "str"
            },
            {
                "name": "LIGHT_ENTITY",
                "value": "switch.bedroom_controller_wall_switch_one",
                "type": "str"
            },
            {
                "name": "DISABLED_WHEN_SLEEPING",
                "value": "true",
                "type": "bool"
            },
            {
                "name": "DOOR_SENSOR",
                "value": "binary_sensor.bedroom_door_contact",
                "type": "str"
            },
            {
                "name": "MANUAL_TIMER",
                "value": "timer.bedroom_automatic_lights_timer",
                "type": "str"
            }
        ],
        "x": 200,
        "y": 3140,
        "wires": []
    },
    {
        "id": "a97e8b63e27a9d12",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "AC Automations On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_ac_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 780,
        "y": 240,
        "wires": [
            [
                "c03a59b5b2299844",
                "bd9f7115a617b2cc"
            ],
            []
        ]
    },
    {
        "id": "c71b1eaaa42f8475",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "AC Automations On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_ac_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 380,
        "y": 380,
        "wires": [
            [
                "fce951f1ac71d4a5"
            ],
            []
        ]
    },
    {
        "id": "59e62d9f96e900f0",
        "type": "comment",
        "z": "fa6bb9cfa58677c8",
        "name": "Co2",
        "info": "",
        "x": 90,
        "y": 2200,
        "wires": []
    },
    {
        "id": "714435401d2913f9",
        "type": "server-state-changed",
        "z": "fa6bb9cfa58677c8",
        "name": "Co2 too high?",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.bedroom_airgradient_carbon_dioxide"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "1200",
        "ifStateType": "num",
        "ifStateOperator": "gte",
        "outputOnlyOnStateChange": true,
        "for": "3",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 2260,
        "wires": [
            [
                "da7b5456509e646d"
            ],
            []
        ]
    },
    {
        "id": "da7b5456509e646d",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Door Open?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.bedroom_door_contact",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 2260,
        "wires": [
            [
                "353c7332c964ab3e"
            ],
            []
        ]
    },
    {
        "id": "c4632767798ab5ee",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn On Bathroom Fan",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bathroom_controller_wall_switch_left"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_on",
        "x": 760,
        "y": 2260,
        "wires": [
            [
                "79c4079fc04d0343"
            ]
        ]
    },
    {
        "id": "79c4079fc04d0343",
        "type": "ha-wait-until",
        "z": "fa6bb9cfa58677c8",
        "name": "Co2 low",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "entities": {
            "entity": [
                "sensor.bedroom_airgradient_carbon_dioxide"
            ],
            "substring": [],
            "regex": []
        },
        "property": "state",
        "comparator": "lte",
        "value": "600",
        "valueType": "num",
        "timeout": "3",
        "timeoutType": "num",
        "timeoutUnits": "hours",
        "checkCurrentState": true,
        "blockInputOverrides": true,
        "outputProperties": [],
        "entityLocation": "data",
        "entityLocationType": "none",
        "x": 960,
        "y": 2260,
        "wires": [
            [
                "eee44aaa4c11e412"
            ],
            [
                "eee44aaa4c11e412"
            ]
        ]
    },
    {
        "id": "eee44aaa4c11e412",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Bathroom Fan",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bathroom_controller_wall_switch_left"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_off",
        "x": 1160,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "353c7332c964ab3e",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Bathroom Fan Off?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.bathroom_controller_wall_switch_left",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 530,
        "y": 2260,
        "wires": [
            [
                "c4632767798ab5ee"
            ],
            []
        ]
    },
    {
        "id": "2b8e4227bc8eb874",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Start Manual Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.bedroom_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "timer",
        "service": "start",
        "x": 710,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "d723371b6e77c7ea",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "AirGradient screen brigthness to 100",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "number.set_value",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "number.bedroom_airgradient_display_brightness"
        ],
        "labelId": [],
        "data": "{\"value\":100}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "number",
        "service": "set_value",
        "x": 750,
        "y": 1520,
        "wires": [
            [
                "a5db56a5752c68fc"
            ]
        ]
    },
    {
        "id": "a5db56a5752c68fc",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "AirGradient led brigthness to 100",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "number.set_value",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "number.bedroom_airgradient_led_bar_brightness"
        ],
        "labelId": [],
        "data": "{\"value\":100}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "number",
        "service": "set_value",
        "x": 1080,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "6151e9658f45cdf0",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "AirGradient screen brigthness to 0",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "number.set_value",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "number.bedroom_airgradient_display_brightness"
        ],
        "labelId": [],
        "data": "{\"value\":0}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "number",
        "service": "set_value",
        "x": 1100,
        "y": 940,
        "wires": [
            [
                "b3e5dc23230bd3e8"
            ]
        ]
    },
    {
        "id": "b3e5dc23230bd3e8",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "AirGradient led brigthness to 0",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "number.set_value",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "number.bedroom_airgradient_led_bar_brightness"
        ],
        "labelId": [],
        "data": "{\"value\":0}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "number",
        "service": "set_value",
        "x": 1410,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "efec944ea44f7e8e",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn On Bedroom AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.bedroom_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_on",
        "x": 1060,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "9417e6dcf709ea6c",
        "type": "subflow:9ae4ced5f6035fca",
        "z": "fa6bb9cfa58677c8",
        "name": "Wall Switch - Top Button",
        "env": [
            {
                "name": "Z1_TOPIC",
                "value": "bedroom/controller_wall",
                "type": "str"
            },
            {
                "name": "Z1_ACTION",
                "value": "single_top",
                "type": "str"
            }
        ],
        "x": 190,
        "y": 3200,
        "wires": [
            [
                "818e6ff514a1e05c"
            ]
        ]
    },
    {
        "id": "818e6ff514a1e05c",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Start Manual Timer",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "timer.start",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.bedroom_automatic_lights_timer"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "timer",
        "service": "start",
        "x": 430,
        "y": 3200,
        "wires": [
            []
        ]
    },
    {
        "id": "19b1aabf7936aae3",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "Bedroom AC running?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "climate.bedroom_ac_controller",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 700,
        "y": 1620,
        "wires": [
            [
                "ebedfcd69743eaf6"
            ],
            []
        ]
    },
    {
        "id": "6f4b3737e042a5b9",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn Off Bedroom AC",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.bedroom_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_off",
        "x": 1180,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "75c9746da7832486",
        "type": "api-call-service",
        "z": "fa6bb9cfa58677c8",
        "name": "Turn On Living Room AC Right",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "climate.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.living_room_right_ac_controller"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "turn_on",
        "x": 1210,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "ebedfcd69743eaf6",
        "type": "api-current-state",
        "z": "fa6bb9cfa58677c8",
        "name": "AC Automations On?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_ac_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 940,
        "y": 1620,
        "wires": [
            [
                "6f4b3737e042a5b9",
                "75c9746da7832486"
            ],
            []
        ]
    },
    {
        "id": "6eedb26837a07fad",
        "type": "comment",
        "z": "c41ab6f93f6c103e",
        "name": "Lights",
        "info": "",
        "x": 90,
        "y": 60,
        "wires": []
    },
    {
        "id": "d498cd411e07341e",
        "type": "subflow:0eac027afb048323",
        "z": "c41ab6f93f6c103e",
        "name": "Bathroom Lights - Wasp Box",
        "env": [
            {
                "name": "MOTION_SENSOR",
                "value": "binary_sensor.bathroom_motion_occupancy",
                "type": "str"
            },
            {
                "name": "DOOR_SENSOR",
                "value": "binary_sensor.bathroom_door_contact",
                "type": "str"
            },
            {
                "name": "BRIGHTNESS_SENSOR",
                "value": "sensor.bathroom_motion_illuminance",
                "type": "str"
            },
            {
                "name": "LIGHT_ENTITY",
                "value": "switch.bathroom_controller_wall_switch_right",
                "type": "str"
            }
        ],
        "x": 200,
        "y": 140,
        "wires": []
    },
    {
        "id": "5536cadbfed4c2f0",
        "type": "server-state-changed",
        "z": "c41ab6f93f6c103e",
        "name": "Shower Door Opens",
        "server": "f88bb71a82464dcf",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.bathroom_door_shower_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 240,
        "wires": [
            [
                "6f0a4b4e6829a057"
            ],
            []
        ]
    },
    {
        "id": "7eb6d807b0b45de3",
        "type": "api-call-service",
        "z": "c41ab6f93f6c103e",
        "name": "Turn On Fan",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bathroom_controller_wall_switch_left"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_on",
        "x": 250,
        "y": 320,
        "wires": [
            [
                "1868631f528de583"
            ]
        ]
    },
    {
        "id": "6f0a4b4e6829a057",
        "type": "api-current-state",
        "z": "c41ab6f93f6c103e",
        "name": "Bathroom Door Closed?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.bathroom_door_contact",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 410,
        "y": 240,
        "wires": [
            [
                "7d5cfe0a9f238622"
            ],
            []
        ]
    },
    {
        "id": "1868631f528de583",
        "type": "ha-wait-until",
        "z": "c41ab6f93f6c103e",
        "name": "Bathroom Door Opens",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "entities": {
            "entity": [
                "binary_sensor.bathroom_door_contact"
            ],
            "substring": [],
            "regex": []
        },
        "property": "state",
        "comparator": "is",
        "value": "on",
        "valueType": "str",
        "timeout": "60",
        "timeoutType": "num",
        "timeoutUnits": "minutes",
        "checkCurrentState": true,
        "blockInputOverrides": true,
        "outputProperties": [],
        "entityLocation": "data",
        "entityLocationType": "none",
        "x": 460,
        "y": 320,
        "wires": [
            [
                "0b268b48126875e9"
            ],
            [
                "0b268b48126875e9"
            ]
        ]
    },
    {
        "id": "7463993a07842f80",
        "type": "api-call-service",
        "z": "c41ab6f93f6c103e",
        "name": "Turn Off Fan",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bathroom_controller_wall_switch_left"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_off",
        "x": 1150,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "0b268b48126875e9",
        "type": "delay",
        "z": "c41ab6f93f6c103e",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 670,
        "y": 320,
        "wires": [
            [
                "76a55c798c17d4de"
            ]
        ]
    },
    {
        "id": "76a55c798c17d4de",
        "type": "api-current-state",
        "z": "c41ab6f93f6c103e",
        "name": "Bathroom Door Opened?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.bathroom_door_contact",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 890,
        "y": 320,
        "wires": [
            [
                "7463993a07842f80"
            ],
            [
                "034c4f3a8cc2295c"
            ]
        ]
    },
    {
        "id": "7d5cfe0a9f238622",
        "type": "api-current-state",
        "z": "c41ab6f93f6c103e",
        "name": "Light Automations Enabled?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_light_automations",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 680,
        "y": 240,
        "wires": [
            [
                "7eb6d807b0b45de3"
            ],
            []
        ]
    },
    {
        "id": "034c4f3a8cc2295c",
        "type": "api-current-state",
        "z": "c41ab6f93f6c103e",
        "name": "Fan On for 2h?",
        "server": "f88bb71a82464dcf",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.bathroom_controller_wall_switch_left",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "120",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1160,
        "y": 320,
        "wires": [
            [
                "b6a7618fa4536b2d"
            ],
            [
                "1868631f528de583"
            ]
        ]
    },
    {
        "id": "b6a7618fa4536b2d",
        "type": "api-call-service",
        "z": "c41ab6f93f6c103e",
        "name": "Turn Off Fan",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "homeassistant.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.bathroom_controller_wall_switch_left"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "homeassistant",
        "service": "turn_off",
        "x": 1370,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "51618521485788e4",
        "type": "comment",
        "z": "0ef8a234d4e5690c",
        "name": "Restart Toggles",
        "info": "",
        "x": 120,
        "y": 60,
        "wires": []
    },
    {
        "id": "79ad674e5d7d124f",
        "type": "inject",
        "z": "0ef8a234d4e5690c",
        "name": "At 04:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 04 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 120,
        "wires": [
            [
                "7a9c47f5a947e1cd"
            ]
        ]
    },
    {
        "id": "7a9c47f5a947e1cd",
        "type": "api-call-service",
        "z": "0ef8a234d4e5690c",
        "name": "Turn Off Toggles",
        "server": "f88bb71a82464dcf",
        "version": 7,
        "debugenabled": false,
        "action": "input_boolean.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.home_vacuumed"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "x": 340,
        "y": 120,
        "wires": [
            []
        ]
    }
]